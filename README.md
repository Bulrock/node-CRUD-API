## NodeJS CRUD API

### Application Setup:

1. Install the LTS version of Node.js from the official website.
2. Download the application files by clicking the "Code" button in the top right corner of the repository.
3. Extract the application files on your local device.
4. Open the folder containing the application files using a code editor.
5. Run the command `npm install` in the console.

### Running the Application:

The application has the following console commands to run the CRUD API:

- `npm run start:dev` - Run the application in development mode (without building using Nodemon).
- `npm run start:prod` - Build and run the application.
- `npm run start:multi` - Build and run the application in multi-threaded mode using clustering and load balancing.

### Testing the Application:

The application has 18 test scenarios to verify all the described functionality.

To run the unit tests, execute the following command in the console:

`npm run tests`

**Libraries used for testing:**

- `jest`
- `ts-jest`
- `supertest`

### Application Functionality:

The server supports GET, POST, PUT, and DELETE requests.

**GET Requests**

GET requests allow retrieving information about all users or a specific user from the in-memory database (an array containing objects with user information).

**GET requests to `api/users`:**

- On successful execution, the server responds with a status code of 200 and an array containing all user records (the array is empty after launching the application).

**GET requests to `api/users/id`:**

- On successful execution, the server responds with a status code of 200 and information about the user with the specified `id`.
- If a user with the specified `id` does not exist, the server responds with a status code of 404 and a corresponding message.
- If the `id` is entered incorrectly (e.g., `api/users/wrongID`), the server responds with a status code of 400 and a corresponding message.

**POST requests to `api/users`:**

POST requests allow adding new users to the user array.
The user object consists of the following properties:

- `id` (generated by the server)
- `username` (string)
- `age` (number)
- `hobbies` (array of strings)

The request body must include `username`, `age`, and `hobbies`. The identifier (`id`) will be automatically assigned by the server in the UUIDv4 format.

- On successful execution, the server saves the new user to the user array and responds with a status code of 201 and the newly created user record.
- If the request body does not contain the required fields (see above), the server responds with a status code of 400 and a corresponding message.

**PUT requests to `api/users/id`:**

PUT requests allow partially or completely updating user information with the specified `id`.
The request body can contain all user properties (`username`, `age`, `hobbies`) or only specific properties (for partial updates). If the object contains other properties, they will be ignored.

- On successful execution, the server updates the user information with the specified `id` and responds with a status code of 200 and the updated user record.
- If a user with the specified `id` does not exist, the server responds with a status code of 404 and a corresponding message.
- If the `id` is entered incorrectly (e.g., `api/users/wrongID`), the server responds with a status code of 400 and a corresponding message.

**DELETE requests to `api/users/id`:**

DELETE requests allow deleting user information with the specified `id`.

- On successful execution, the server deletes the user information with the specified `id` and responds with a status code of 204.
- If a user with the specified `id` does not exist, the server responds with a status code of 404 and a corresponding message.
- If the `id` is entered incorrectly (e.g., `api/users/wrongID`), the server responds with a status code of 400 and a corresponding message.

**Error Handling**

- For requests to non-existing endpoints, the server responds with a status of 404 and a corresponding message.
- In case of an error on the server side, the server responds with a status of 500 and a corresponding message.
- If an unsupported method is used, the server responds with a status code of 501 and a corresponding message.

### Additional Information:

The primary and backup ports for the application are stored in the `.env` file. When starting the server, it will choose either the primary (4000) or backup (5000) port, or run on port 3000.
